import{d as rr}from"./deepmerge-DhIoniG1.js";import{c as G,t as Tr,a as hr,i as Sr}from"./lodash-es-ClCkCI8n.js";import{r as c}from"./react-Kl9nTyr-.js";import{i as O}from"./react-fast-compare-DbXnMHCH.js";import"./hoist-non-react-statics-C48UpQYE.js";function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},S.apply(this,arguments)}function mr(e,t){if(e==null)return{};var n={},i=Object.keys(e),u,s;for(s=0;s<i.length;s++)u=i[s],!(t.indexOf(u)>=0)&&(n[u]=e[u]);return n}var j=c.createContext(void 0);j.displayName="FormikContext";var Nr=j.Provider;j.Consumer;function Pr(){var e=c.useContext(j);return e}var R=function(t){return typeof t=="function"},K=function(t){return t!==null&&typeof t=="object"},Hr=function(t){return String(Math.floor(Number(t)))===t},Z=function(t){return Object.prototype.toString.call(t)==="[object String]"},Gr=function(t){return c.Children.count(t)===0},x=function(t){return K(t)&&R(t.then)};function m(e,t,n,i){i===void 0&&(i=0);for(var u=Tr(t);e&&i<u.length;)e=e[u[i++]];return i!==u.length&&!e||e===void 0?n:e}function k(e,t,n){for(var i=hr(e),u=i,s=0,v=Tr(t);s<v.length-1;s++){var h=v[s],g=m(e,v.slice(0,s+1));if(g&&(K(g)||Array.isArray(g)))u=u[h]=hr(g);else{var b=v[s+1];u=u[h]=Hr(b)&&Number(b)>=0?[]:{}}}return(s===0?e:u)[v[s]]===n?e:(n===void 0?delete u[v[s]]:u[v[s]]=n,s===0&&n===void 0&&delete i[v[s]],i)}function Ir(e,t,n,i){n===void 0&&(n=new WeakMap),i===void 0&&(i={});for(var u=0,s=Object.keys(e);u<s.length;u++){var v=s[u],h=e[v];K(h)?n.get(h)||(n.set(h,!0),i[v]=Array.isArray(h)?[]:{},Ir(h,t,n,i[v])):i[v]=t}return i}function Wr(e,t){switch(t.type){case"SET_VALUES":return S({},e,{values:t.payload});case"SET_TOUCHED":return S({},e,{touched:t.payload});case"SET_ERRORS":return O(e.errors,t.payload)?e:S({},e,{errors:t.payload});case"SET_STATUS":return S({},e,{status:t.payload});case"SET_ISSUBMITTING":return S({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return S({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return S({},e,{values:k(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return S({},e,{touched:k(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return S({},e,{errors:k(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return S({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return S({},e,{touched:Ir(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":return S({},e,{isSubmitting:!1});case"SUBMIT_SUCCESS":return S({},e,{isSubmitting:!1});default:return e}}var M={},W={};function jr(e){var t=e.validateOnChange,n=t===void 0?!0:t,i=e.validateOnBlur,u=i===void 0?!0:i,s=e.validateOnMount,v=s===void 0?!1:s,h=e.isInitialValid,g=e.enableReinitialize,b=g===void 0?!1:g,tr=e.onSubmit,Rr=mr(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),f=S({validateOnChange:n,validateOnBlur:u,validateOnMount:v,onSubmit:tr},Rr),A=c.useRef(f.initialValues),L=c.useRef(f.initialErrors||M),D=c.useRef(f.initialTouched||W),U=c.useRef(f.initialStatus),F=c.useRef(!1),V=c.useRef({});c.useEffect(function(){return F.current=!0,function(){F.current=!1}},[]);var br=c.useState(0),Ar=br[1],P=c.useRef({values:G(f.initialValues),errors:G(f.initialErrors)||M,touched:G(f.initialTouched)||W,status:G(f.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),y=P.current,p=c.useCallback(function(r){var a=P.current;P.current=Wr(a,r),a!==P.current&&Ar(function(l){return l+1})},[]),ir=c.useCallback(function(r,a){return new Promise(function(l,o){var d=f.validate(r,a);d==null?l(M):x(d)?d.then(function(E){l(E||M)},function(E){o(E)}):l(d)})},[f.validate]),$=c.useCallback(function(r,a){var l=f.validationSchema,o=R(l)?l(a):l,d=a&&o.validateAt?o.validateAt(a,r):$r(r,o);return new Promise(function(E,T){d.then(function(){E(M)},function(_){_.name==="ValidationError"?E(Kr(_)):T(_)})})},[f.validationSchema]),ar=c.useCallback(function(r,a){return new Promise(function(l){return l(V.current[r].validate(a))})},[]),nr=c.useCallback(function(r){var a=Object.keys(V.current).filter(function(o){return R(V.current[o].validate)}),l=a.length>0?a.map(function(o){return ar(o,m(r,o))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(l).then(function(o){return o.reduce(function(d,E,T){return E==="DO_NOT_DELETE_YOU_WILL_BE_FIRED"||E&&(d=k(d,a[T],E)),d},{})})},[ar]),Fr=c.useCallback(function(r){return Promise.all([nr(r),f.validationSchema?$(r):{},f.validate?ir(r):{}]).then(function(a){var l=a[0],o=a[1],d=a[2],E=rr.all([l,o,d],{arrayMerge:zr});return E})},[f.validate,f.validationSchema,nr,ir,$]),C=I(function(r){return r===void 0&&(r=y.values),p({type:"SET_ISVALIDATING",payload:!0}),Fr(r).then(function(a){return F.current&&(p({type:"SET_ISVALIDATING",payload:!1}),p({type:"SET_ERRORS",payload:a})),a})});c.useEffect(function(){v&&F.current===!0&&O(A.current,f.initialValues)&&C(A.current)},[v,C]);var N=c.useCallback(function(r){var a=r&&r.values?r.values:A.current,l=r&&r.errors?r.errors:L.current?L.current:f.initialErrors||{},o=r&&r.touched?r.touched:D.current?D.current:f.initialTouched||{},d=r&&r.status?r.status:U.current?U.current:f.initialStatus;A.current=a,L.current=l,D.current=o,U.current=d;var E=function(){p({type:"RESET_FORM",payload:{isSubmitting:!!r&&!!r.isSubmitting,errors:l,touched:o,status:d,values:a,isValidating:!!r&&!!r.isValidating,submitCount:r&&r.submitCount&&typeof r.submitCount=="number"?r.submitCount:0}})};if(f.onReset){var T=f.onReset(y.values,pr);x(T)?T.then(E):E()}else E()},[f.initialErrors,f.initialStatus,f.initialTouched,f.onReset]);c.useEffect(function(){F.current===!0&&!O(A.current,f.initialValues)&&b&&(A.current=f.initialValues,N(),v&&C(A.current))},[b,f.initialValues,N,v,C]),c.useEffect(function(){b&&F.current===!0&&!O(L.current,f.initialErrors)&&(L.current=f.initialErrors||M,p({type:"SET_ERRORS",payload:f.initialErrors||M}))},[b,f.initialErrors]),c.useEffect(function(){b&&F.current===!0&&!O(D.current,f.initialTouched)&&(D.current=f.initialTouched||W,p({type:"SET_TOUCHED",payload:f.initialTouched||W}))},[b,f.initialTouched]),c.useEffect(function(){b&&F.current===!0&&!O(U.current,f.initialStatus)&&(U.current=f.initialStatus,p({type:"SET_STATUS",payload:f.initialStatus}))},[b,f.initialStatus,f.initialTouched]);var ur=I(function(r){if(V.current[r]&&R(V.current[r].validate)){var a=m(y.values,r),l=V.current[r].validate(a);return x(l)?(p({type:"SET_ISVALIDATING",payload:!0}),l.then(function(o){return o}).then(function(o){p({type:"SET_FIELD_ERROR",payload:{field:r,value:o}}),p({type:"SET_ISVALIDATING",payload:!1})})):(p({type:"SET_FIELD_ERROR",payload:{field:r,value:l}}),Promise.resolve(l))}else if(f.validationSchema)return p({type:"SET_ISVALIDATING",payload:!0}),$(y.values,r).then(function(o){return o}).then(function(o){p({type:"SET_FIELD_ERROR",payload:{field:r,value:m(o,r)}}),p({type:"SET_ISVALIDATING",payload:!1})});return Promise.resolve()}),Cr=c.useCallback(function(r,a){var l=a.validate;V.current[r]={validate:l}},[]),gr=c.useCallback(function(r){delete V.current[r]},[]),lr=I(function(r,a){p({type:"SET_TOUCHED",payload:r});var l=a===void 0?u:a;return l?C(y.values):Promise.resolve()}),or=c.useCallback(function(r){p({type:"SET_ERRORS",payload:r})},[]),cr=I(function(r,a){var l=R(r)?r(y.values):r;p({type:"SET_VALUES",payload:l});var o=a===void 0?n:a;return o?C(l):Promise.resolve()}),H=c.useCallback(function(r,a){p({type:"SET_FIELD_ERROR",payload:{field:r,value:a}})},[]),w=I(function(r,a,l){p({type:"SET_FIELD_VALUE",payload:{field:r,value:a}});var o=l===void 0?n:l;return o?C(k(y.values,r,a)):Promise.resolve()}),sr=c.useCallback(function(r,a){var l=a,o=r,d;if(!Z(r)){r.persist&&r.persist();var E=r.target?r.target:r.currentTarget,T=E.type,_=E.name,Q=E.id,X=E.value,wr=E.checked;E.outerHTML;var yr=E.options,Br=E.multiple;l=a||_||Q,o=/number|range/.test(T)?(d=parseFloat(X),isNaN(d)?"":d):/checkbox/.test(T)?qr(m(y.values,l),wr,X):yr&&Br?Yr(yr):X}l&&w(l,o)},[w,y.values]),z=I(function(r){if(Z(r))return function(a){return sr(a,r)};sr(r)}),B=I(function(r,a,l){a===void 0&&(a=!0),p({type:"SET_FIELD_TOUCHED",payload:{field:r,value:a}});var o=l===void 0?u:l;return o?C(y.values):Promise.resolve()}),fr=c.useCallback(function(r,a){r.persist&&r.persist();var l=r.target,o=l.name,d=l.id;l.outerHTML;var E=a||o||d;B(E,!0)},[B]),Y=I(function(r){if(Z(r))return function(a){return fr(a,r)};fr(r)}),dr=c.useCallback(function(r){R(r)?p({type:"SET_FORMIK_STATE",payload:r}):p({type:"SET_FORMIK_STATE",payload:function(){return r}})},[]),vr=c.useCallback(function(r){p({type:"SET_STATUS",payload:r})},[]),Er=c.useCallback(function(r){p({type:"SET_ISSUBMITTING",payload:r})},[]),q=I(function(){return p({type:"SUBMIT_ATTEMPT"}),C().then(function(r){var a=r instanceof Error,l=!a&&Object.keys(r).length===0;if(l){var o;try{if(o=Vr(),o===void 0)return}catch(d){throw d}return Promise.resolve(o).then(function(d){return F.current&&p({type:"SUBMIT_SUCCESS"}),d}).catch(function(d){if(F.current)throw p({type:"SUBMIT_FAILURE"}),d})}else if(F.current&&(p({type:"SUBMIT_FAILURE"}),a))throw r})}),_r=I(function(r){r&&r.preventDefault&&R(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&R(r.stopPropagation)&&r.stopPropagation(),q().catch(function(a){console.warn("Warning: An unhandled error was caught from submitForm()",a)})}),pr={resetForm:N,validateForm:C,validateField:ur,setErrors:or,setFieldError:H,setFieldTouched:B,setFieldValue:w,setStatus:vr,setSubmitting:Er,setTouched:lr,setValues:cr,setFormikState:dr,submitForm:q},Vr=I(function(){return tr(y.values,pr)}),Lr=I(function(r){r&&r.preventDefault&&R(r.preventDefault)&&r.preventDefault(),r&&r.stopPropagation&&R(r.stopPropagation)&&r.stopPropagation(),N()}),Dr=c.useCallback(function(r){return{value:m(y.values,r),error:m(y.errors,r),touched:!!m(y.touched,r),initialValue:m(A.current,r),initialTouched:!!m(D.current,r),initialError:m(L.current,r)}},[y.errors,y.touched,y.values]),Mr=c.useCallback(function(r){return{setValue:function(l,o){return w(r,l,o)},setTouched:function(l,o){return B(r,l,o)},setError:function(l){return H(r,l)}}},[w,B,H]),Or=c.useCallback(function(r){var a=K(r),l=a?r.name:r,o=m(y.values,l),d={name:l,value:o,onChange:z,onBlur:Y};if(a){var E=r.type,T=r.value,_=r.as,Q=r.multiple;E==="checkbox"?T===void 0?d.checked=!!o:(d.checked=!!(Array.isArray(o)&&~o.indexOf(T)),d.value=T):E==="radio"?(d.checked=o===T,d.value=T):_==="select"&&Q&&(d.value=d.value||[],d.multiple=!0)}return d},[Y,z,y.values]),J=c.useMemo(function(){return!O(A.current,y.values)},[A.current,y.values]),kr=c.useMemo(function(){return typeof h<"u"?J?y.errors&&Object.keys(y.errors).length===0:h!==!1&&R(h)?h(f):h:y.errors&&Object.keys(y.errors).length===0},[h,J,y.errors,f]),Ur=S({},y,{initialValues:A.current,initialErrors:L.current,initialTouched:D.current,initialStatus:U.current,handleBlur:Y,handleChange:z,handleReset:Lr,handleSubmit:_r,resetForm:N,setErrors:or,setFormikState:dr,setFieldTouched:B,setFieldValue:w,setFieldError:H,setStatus:vr,setSubmitting:Er,setTouched:lr,setValues:cr,submitForm:q,validateForm:C,validateField:ur,isValid:kr,dirty:J,unregisterField:gr,registerField:Cr,getFieldProps:Or,getFieldMeta:Dr,getFieldHelpers:Mr,validateOnBlur:u,validateOnChange:n,validateOnMount:v});return Ur}function te(e){var t=jr(e),n=e.component,i=e.children,u=e.render,s=e.innerRef;return c.useImperativeHandle(s,function(){return t}),c.createElement(Nr,{value:t},n?c.createElement(n,t):u?u(t):i?R(i)?i(t):Gr(i)?null:c.Children.only(i):null)}function Kr(e){var t={};if(e.inner){if(e.inner.length===0)return k(t,e.path,e.message);for(var u=e.inner,n=Array.isArray(u),i=0,u=n?u:u[Symbol.iterator]();;){var s;if(n){if(i>=u.length)break;s=u[i++]}else{if(i=u.next(),i.done)break;s=i.value}var v=s;m(t,v.path)||(t=k(t,v.path,v.message))}}return t}function $r(e,t,n,i){n===void 0&&(n=!1);var u=er(e);return t[n?"validateSync":"validate"](u,{abortEarly:!1,context:u})}function er(e){var t=Array.isArray(e)?[]:{};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=String(n);Array.isArray(e[i])===!0?t[i]=e[i].map(function(u){return Array.isArray(u)===!0||Sr(u)?er(u):u!==""?u:void 0}):Sr(e[i])?t[i]=er(e[i]):t[i]=e[i]!==""?e[i]:void 0}return t}function zr(e,t,n){var i=e.slice();return t.forEach(function(s,v){if(typeof i[v]>"u"){var h=n.clone!==!1,g=h&&n.isMergeableObject(s);i[v]=g?rr(Array.isArray(s)?[]:{},s,n):s}else n.isMergeableObject(s)?i[v]=rr(e[v],s,n):e.indexOf(s)===-1&&i.push(s)}),i}function Yr(e){return Array.from(e).filter(function(t){return t.selected}).map(function(t){return t.value})}function qr(e,t,n){if(typeof e=="boolean")return!!t;var i=[],u=!1,s=-1;if(Array.isArray(e))i=e,s=e.indexOf(n),u=s>=0;else if(!n||n=="true"||n=="false")return!!t;return t&&n&&!u?i.concat(n):u?i.slice(0,s).concat(i.slice(s+1)):i}var Jr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?c.useLayoutEffect:c.useEffect;function I(e){var t=c.useRef(e);return Jr(function(){t.current=e}),c.useCallback(function(){for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return t.current.apply(void 0,i)},[])}var Qr=c.forwardRef(function(e,t){var n=e.action,i=mr(e,["action"]),u=n??"#",s=Pr(),v=s.handleReset,h=s.handleSubmit;return c.createElement("form",S({onSubmit:h,ref:t,onReset:v,action:u},i))});Qr.displayName="Form";export{te as F,Qr as a};
